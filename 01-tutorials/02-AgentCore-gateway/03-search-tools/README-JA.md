# Amazon Bedrock AgentCore Gateway - セマンティック検索

## チュートリアル アーキテクチャ

Amazon Bedrock AgentCore Gatewayは、エージェントとそれらが相互作用する必要があるツールやリソース間の統一された接続性を提供します。Gatewayはこの接続レイヤーで複数の役割を果たします：

1. **セキュリティガード**: Gatewayは、有効なユーザー/エージェントのみがツール/リソースにアクセスできるようにOAuth認証を管理します。
2. **トランスレーター**: GatewayはModel Context Protocol（MCP）などの人気プロトコルを使用してエージェントリクエストをAPIリクエストとLambda呼び出しに変換します。これは、開発者がサーバーをホスト、プロトコル統合の管理、バージョンサポート、バージョンパッチなどを行う必要がないことを意味します。
3. **コンポーザー**: Gatewayにより、開発者は複数のAPI、関数、ツールをエージェントが使用できる単一のMCPエンドポイントにシームレスに組み合わせることができます。
4. **キーチェーン**: Gatewayは適切なツールで使用する適切なクレデンシャルの注入を処理し、エージェントが異なるクレデンシャルセットを必要とするツールをシームレスに活用できるようにします。
5. **リサーチャー**: Gatewayにより、エージェントはすべてのツールを検索して、特定のコンテキストや質問に最適なツールのみを見つけることができます。これにより、エージェントは少数ではなく数千のツールを利用できます。また、エージェントのLLMプロンプトで提供する必要があるツールセットを最小化し、レイテンシとコストを削減します。
6. **インフラストラクチャマネージャー**: Gatewayは完全にサーバーレスで、組み込まれた可観測性と監査機能を備えており、開発者がエージェントとツールを統合するための追加インフラストラクチャを管理する必要性を軽減します。

![動作の仕組み](images/gw-arch-overview.png)

## AgentCore Gatewayは多数のツールを持つMCPサーバーの課題の解決に役立ちます

典型的なエンタープライズ環境では、エージェントビルダーは数百から数千のMCPツールを持つMCPサーバーに遭遇します。この量のツールは、ツール選択精度の低下、コストの増加、過度なツールメタデータによる高いトークン使用量によるレイテンシの増加など、AIエージェントに課題をもたらします。
これは、エージェントをサードパーティサービス（例：Zendesk、Salesforce、Slack、JIRA、...）や既存のエンタープライズRESTサービスに接続する際に発生する可能性があります。AgentCore Gatewayはツール全体に組み込まれたセマンティック検索を提供し、エージェントに必要なツールを提供しながら、エージェントのレイテンシ、コスト、精度を改善します。ユースケース、LLMモデル、エージェントフレームワークによっては、典型的なMCPサーバーの数百のツールの完全セットを提供するのではなく、関連ツールにエージェントを集中させることで、最大3倍のレイテンシ改善を見ることができます。

![動作の仕組み](images/gateway_tool_search.png)

## チュートリアル概要

これらのチュートリアルでは、以下の機能について説明します：

- AWS Lambdaバックされたターゲットを持つAmazon Bedrock AgentCore Gatewayの作成
- AgentCore Gatewayセマンティック検索の使用
- AgentCore Gateway検索がレイテンシを改善する方法を示すStrands Agentsの使用

- [Amazon Bedrock AgentCore Gateway - セマンティック検索](./01-gateway-search.ipynb)